<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cactus Mini App</title>
<style>
    body {
        background-color: #121212;
        color: white;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        text-align: center;
    }
    nav {
        position: fixed;
        bottom: 0;
        width: 100%;
        background: #1e1e1e;
        display: flex;
        justify-content: space-around;
        padding: 10px 0;
        border-top: 2px solid #333;
    }
    nav a {
        color: gray;
        text-decoration: none;
        font-size: 14px;
    }
    nav a.active {
        color: #00ff88;
        font-weight: bold;
    }
    .page {
        display: none;
        padding: 20px;
        padding-bottom: 60px;
    }
    .active-page {
        display: block;
    }
    button {
        background: #222;
        border: none;
        color: #00aaff;
        padding: 10px 20px;
        margin: 8px 0;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        width: 90%;
        max-width: 300px;
    }
    button:hover {
        background: #333;
    }
    img.logo {
        width: 180px;
        margin: 20px auto;
    }
    .coin {
        color: gold;
        font-weight: bold;
        font-size: 18px;
    }
</style>
</head>
<body>

<!-- Game Page -->
<div id="game" class="page active-page">
    <div style="display:flex;justify-content:space-between;align-items:center;">
        <span id="wallet-status">Not Connected</span>
        <button style="background:#00cc99;color:white;padding:5px 10px;border-radius:6px;" onclick="connectWallet()">Connect Wallet</button>
    </div>
    <h2>üéÆ Game</h2>
    <div>
        <img src="https://raw.githubusercontent.com/Cactusgeam/CactusMiniApp/main/cactus.png" alt="Cactus" class="logo">
    </div>
    <p class="coin">Coins: <span id="coin-count">0</span></p>
</div>

<!-- Leaderboard Page -->
<div id="leaderboard" class="page">
    <h2>üèÜ Leaderboard</h2>
    <p>1. Alice - 1500 coins</p>
    <p>2. Bob - 1200 coins</p>
    <p>3. You - <span id="your-coins-lb">0</span> coins</p>
</div>

<!-- Friends Page -->
<div id="friends" class="page">
    <h2>üë• Friends</h2>
    <p>Your referral link:</p>
    <input type="text" id="referral-link" readonly style="width:90%;padding:5px;text-align:center;">
</div>

<!-- Tasks Page -->
<div id="tasks" class="page">
    <h2>‚≠ê Tasks</h2>
    <button onclick="completeTask()">Join Telegram</button>
    <button onclick="completeTask()">Follow Twitter</button>
    <button onclick="completeTask()">Join Discord</button>
</div>

<!-- Navigation -->
<nav>
    <a href="#" onclick="showPage('game', this)" class="active">üéÆ Game</a>
    <a href="#" onclick="showPage('leaderboard', this)">üèÜ Leaderboard</a>
    <a href="#" onclick="showPage('friends', this)">üë• Friends</a>
    <a href="#" onclick="showPage('tasks', this)">‚≠ê Tasks</a>
</nav>

<script>
let coins = localStorage.getItem("coins") ? parseInt(localStorage.getItem("coins")) : 0;
document.getElementById("coin-count").innerText = coins;
document.getElementById("your-coins-lb").innerText = coins;

function showPage(pageId, el) {
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active-page"));
    document.getElementById(pageId).classList.add("active-page");
    document.querySelectorAll("nav a").forEach(a => a.classList.remove("active"));
    el.classList.add("active");
}

function completeTask() {
    coins += 300;
    localStorage.setItem("coins", coins);
    document.getElementById("coin-count").innerText = coins;
    document.getElementById("your-coins-lb").innerText = coins;
    alert("Task completed! +300 coins");
}

function connectWallet() {
    document.getElementById("wallet-status").innerText = "Wallet Connected";
}

function generateReferralLink() {
    let userId = "user" + Math.floor(Math.random() * 100000);
    let link = `https://cactusgeam.github.io/CactusMiniApp/?ref=${userId}`;
    document.getElementById("referral-link").value = link;
}
generateReferralLink();
</script>

</body>
</html>
